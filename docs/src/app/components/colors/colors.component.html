<section id="colors" class="py-32 px-6">
  <div class="max-w-6xl mx-auto">
    <div class="text-center mb-16">
      <h2 class="text-4xl lg:text-5xl font-bold mb-4">Color <span class="gradient-text">Customization</span></h2>
      <p class="text-xl text-white/60 max-w-2xl mx-auto">
        Make your pet truly unique with custom colors or choose from beautiful presets
      </p>
    </div>

    <div class="grid lg:grid-cols-2 gap-12 items-start">
      <!-- Color Controls -->
      <div class="glass rounded-3xl p-8">
        <h3 class="text-xl font-bold mb-6">Color Presets</h3>
        <div class="grid grid-cols-4 gap-4 mb-8">
          @for (preset of presets; track preset.name) {
            <button
              (click)="selectPreset(preset)"
              class="text-center group rounded-xl p-2 transition-all"
              [class.ring-2]="selectedPreset()?.name === preset.name"
              [class.ring-white]="selectedPreset()?.name === preset.name"
              [class.bg-white/10]="selectedPreset()?.name === preset.name">
              <div class="w-12 h-12 mx-auto rounded-full mb-2 transition-transform group-hover:scale-110"
                   [style.background]="'linear-gradient(135deg, ' + preset.primary + ', ' + preset.secondary + ')'">
              </div>
              <span class="text-xs text-white/70">{{ preset.name }}</span>
            </button>
          }
        </div>

        <h3 class="text-xl font-bold mb-6">Custom Colors</h3>
        <div class="space-y-4">
          <div class="flex items-center gap-4">
            <label class="w-24 text-sm text-white/70">Primary</label>
            <input type="color" [(ngModel)]="customColors.primary" (ngModelChange)="updateCustom()"
                   class="w-12 h-12 rounded-lg cursor-pointer bg-transparent border-0"/>
            <input type="text" [(ngModel)]="customColors.primary" (ngModelChange)="updateCustom()"
                   class="flex-1 bg-white/10 rounded-lg px-3 py-2 text-sm font-mono"/>
          </div>
          <div class="flex items-center gap-4">
            <label class="w-24 text-sm text-white/70">Secondary</label>
            <input type="color" [(ngModel)]="customColors.secondary" (ngModelChange)="updateCustom()"
                   class="w-12 h-12 rounded-lg cursor-pointer bg-transparent border-0"/>
            <input type="text" [(ngModel)]="customColors.secondary" (ngModelChange)="updateCustom()"
                   class="flex-1 bg-white/10 rounded-lg px-3 py-2 text-sm font-mono"/>
          </div>
          <div class="flex items-center gap-4">
            <label class="w-24 text-sm text-white/70">Accent</label>
            <input type="color" [(ngModel)]="customColors.accent" (ngModelChange)="updateCustom()"
                   class="w-12 h-12 rounded-lg cursor-pointer bg-transparent border-0"/>
            <input type="text" [(ngModel)]="customColors.accent" (ngModelChange)="updateCustom()"
                   class="flex-1 bg-white/10 rounded-lg px-3 py-2 text-sm font-mono"/>
          </div>
          <div class="flex items-center gap-4">
            <label class="w-24 text-sm text-white/70">Blush</label>
            <input type="color" [(ngModel)]="customColors.blush" (ngModelChange)="updateCustom()"
                   class="w-12 h-12 rounded-lg cursor-pointer bg-transparent border-0"/>
            <input type="text" [(ngModel)]="customColors.blush" (ngModelChange)="updateCustom()"
                   class="flex-1 bg-white/10 rounded-lg px-3 py-2 text-sm font-mono"/>
          </div>
        </div>

        <div class="mt-8 p-4 bg-black/20 rounded-xl">
          <h4 class="text-sm font-bold mb-2 text-white/70">VSCode Settings</h4>
          <pre class="text-xs font-mono text-tama-mint overflow-x-auto"><code>{{ settingsJson() }}</code></pre>
        </div>
      </div>

      <!-- Preview -->
      <div class="glass rounded-3xl p-8">
        <h3 class="text-xl font-bold mb-6 text-center">Live Preview</h3>
        <div class="grid grid-cols-3 gap-6">
          @for (sprite of previewSprites(); track sprite.name) {
            <div class="text-center">
              <div class="w-20 h-20 mx-auto mb-2 sprite-container"
                   [innerHTML]="getSanitizedSvg(sprite.svg)"
                   [style.--pet-primary]="currentColors().primary"
                   [style.--pet-secondary]="currentColors().secondary"
                   [style.--pet-accent]="currentColors().accent"
                   [style.--pet-blush]="currentColors().blush">
              </div>
              <span class="text-xs text-white/60">{{ sprite.name }}</span>
            </div>
          }
        </div>

        @if (adultSprite()) {
          <div class="mt-8 text-center">
            <div class="w-32 h-32 mx-auto animate-bounce-slow sprite-container"
                 [innerHTML]="getSanitizedSvg(adultSprite()!.svg)"
                 [style.--pet-primary]="currentColors().primary"
                 [style.--pet-secondary]="currentColors().secondary"
                 [style.--pet-accent]="currentColors().accent"
                 [style.--pet-blush]="currentColors().blush">
            </div>
            <p class="mt-4 text-white/60">
              Using: <span class="font-bold" [style.color]="currentColors().primary">{{ selectedPreset()?.name || 'Custom' }}</span>
            </p>
          </div>
        }
      </div>
    </div>
  </div>
</section>


